<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using vol2birdR • vol2birdR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using vol2birdR">
<meta property="og:description" content="vol2birdR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vol2birdR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/package.html">Using vol2birdR</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/adokter/vol2birdR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Using vol2birdR</h1>
                        <h4 data-toc-skip class="author">Adriaan M. Dokter &amp; Anders Henja</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/adokter/vol2birdR/blob/HEAD/vignettes/package.Rmd" class="external-link"><code>vignettes/package.Rmd</code></a></small>
      <div class="hidden name"><code>package.Rmd</code></div>

    </div>

    
    
<p>vol2birdR is an R package for providing support to calculate vertical profiles and other biological scatteres from weather radar data. The original <strong>vol2bird</strong> is written as a C-package and has been migrated to also work as an R package.</p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The vol2birdR package provides necessary functions to process radar data. This package can also use libtorch to utilize machine learning during the processing of radar data. This documentation only gives a brief introduction on how to use vol2birdR. For more information just type: <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library(help=vol2birdR)</a></code></p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="mistnet">Mistnet<a class="anchor" aria-label="anchor" href="#mistnet"></a>
</h3>
<p>Mistnet is a deep convolution neural net for segmentating out rain in S-band radar data, see the publication at <a href="https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/2041-210X.13280" class="external-link uri">https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/2041-210X.13280</a>. To use this functionality you will have to install the mistnet software as part of running the vol2birdR library. This is easilly done by calling install_mistnet after the library has been loaded.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/adokter/vol2birdR/" class="external-link">vol2birdR</a></span><span class="op">)</span>
<span class="fu"><a href="../reference/install_mistnet.html">install_mistnet</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>This will download libtorch from the download section of <a href="https://pytorch.org" class="external-link uri">https://pytorch.org</a> as well as a wrapper library from our AWS that enables the mistnet functionality. The mistnet model has to be manually downloaded and specified in the configuration instance. The default location of the mistnet model is /opt/vol2bird/etc/mistnet_nexrad.pt. You can download the mistnet model from <a href="http://mistnet.s3.amazonaws.com/mistnet_nexrad.pt" class="external-link uri">http://mistnet.s3.amazonaws.com/mistnet_nexrad.pt</a>. <code>wget http://mistnet.s3.amazonaws.com/mistnet_nexrad.pt -O "/home/docuser/etc/mistnet_nexrad.pt"</code></p>
</div>
<div class="section level3">
<h3 id="processing">Processing<a class="anchor" aria-label="anchor" href="#processing"></a>
</h3>
<p>Processing of the radar data will always be performed in a similar way. First you create the configuration instance and modify configuration according to needs. Then the actual processor is initiated and then the processing is performed.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/adokter/vol2birdR/" class="external-link">vol2birdR</a></span><span class="op">)</span>
<span class="va">config</span><span class="op">&lt;-</span><span class="va">Vol2BirdConfig</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">config</span><span class="op">$</span><span class="va">verbose</span><span class="op">&lt;-</span><span class="cn">TRUE</span>
<span class="va">config</span><span class="op">$</span><span class="va">useMistNet</span><span class="op">&lt;-</span><span class="cn">TRUE</span>
<span class="va">processor</span><span class="op">&lt;-</span><span class="va">Vol2Bird</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">processor</span><span class="op">$</span><span class="fu">process</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"/...../volume.h5"</span><span class="op">)</span>,<span class="va">config</span>,<span class="st">"vp.h5"</span>,<span class="st">"pvol.h5"</span><span class="op">)</span></code></pre></div>
<p>Let’s break down the above example.</p>
<p>First the vol2birdR library is loaded by using <code><a href="https://github.com/adokter/vol2birdR/" class="external-link">library(vol2birdR)</a></code></p>
<p>The next step is where we setup the configuration required. This can be modified heavily and the best way to learn about this is to read the documentation about the config-class. In this example, the configuration is set to printout verbose output and that the torch library (mistnet) should be used using the mistnet model downloaded earlier.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">config</span><span class="op">&lt;-</span><span class="va">Vol2BirdConfig</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">config</span><span class="op">$</span><span class="va">verbose</span><span class="op">&lt;-</span><span class="cn">TRUE</span>
<span class="va">config</span><span class="op">$</span><span class="va">useMistNet</span><span class="op">&lt;-</span><span class="cn">TRUE</span>
<span class="va">config</span><span class="op">$</span><span class="va">mistNetPath</span><span class="op">&lt;-</span><span class="st">"/home/docuser/etc/mistnet_nexrad.pt"</span></code></pre></div>
<p>In the final step the processing is performed where the input is a ODIM H5 volume, above defined configuration and output is a vertical profile and a polar volume.</p>
</div>
<div class="section level3">
<h3 id="vol2birdconfig">Vol2BirdConfig<a class="anchor" aria-label="anchor" href="#vol2birdconfig"></a>
</h3>
<p>As mentioned earlier, all processing involves a config instance where all options are set. These options involves everything from printing certain information to what type of processing that should be performed. In some cases it might be necessary to copy configuration instances for whatever reason. In these cases you can’t just assign the instances like</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">config</span><span class="op">&lt;-</span><span class="va">Vol2BirdConfig</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">extraconfig</span><span class="op">&lt;-</span><span class="va">config</span></code></pre></div>
<p>When doing like this, the config and extraconfig instances will both refer to the same object. To avoid this, use either clone or the copy constructor like</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">config</span><span class="op">&lt;-</span><span class="va">Vol2BirdConfig</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">extraconfig</span><span class="op">&lt;-</span><span class="va">config</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span><span class="op">)</span>             <span class="co"># Clone method</span>
<span class="va">otherconfig</span><span class="op">&lt;-</span><span class="va">Vol2BirdConfig</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">config</span><span class="op">)</span> <span class="co"># Copy constructor</span></code></pre></div>
<p>Copyright 2010-2021 Adriaan M. Dokter (Cornell lab of Ornithology, University of Amsterdam) &amp; Netherlands eScience Centre</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Anders Henja, Adriaan M. Dokter.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
