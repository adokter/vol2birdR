<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="vol2birdR">
<title>Introduction to vol2birdR • vol2birdR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to vol2birdR">
<meta property="og:description" content="vol2birdR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">vol2birdR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/vol2birdR.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/adokter/vol2birdR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to vol2birdR</h1>
                        <h4 data-toc-skip class="author">Adriaan M.
Dokter &amp; Anders Henja</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/adokter/vol2birdR/blob/HEAD/vignettes/vol2birdR.Rmd" class="external-link"><code>vignettes/vol2birdR.Rmd</code></a></small>
      <div class="d-none name"><code>vol2birdR.Rmd</code></div>
    </div>

    
    
<p>vol2birdR is an R package for providing support to calculate vertical
profiles and other biological scatteres from weather radar data. The
original <strong>vol2bird</strong> is written as a C-package and has
been migrated to also work as an R package.</p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The vol2birdR package provides necessary functions to process radar
data. This package can also use libtorch to utilize machine learning
during the processing of radar data. This documentation only gives a
brief introduction on how to use vol2birdR. For more information just
type: <code><a href="https://rdrr.io/r/base/library.html" class="external-link">library(help=vol2birdR)</a></code></p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="mistnet">Mistnet<a class="anchor" aria-label="anchor" href="#mistnet"></a>
</h3>
<p>Mistnet is a deep convolution neural net for segmentating out rain in
S-band radar data, see the publication at <a href="https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/2041-210X.13280" class="external-link uri">https://besjournals.onlinelibrary.wiley.com/doi/full/10.1111/2041-210X.13280</a>.
To use this functionality you will have to install the mistnet software
as part of running the vol2birdR library. This is easilly done by
calling install_mistnet after the library has been loaded.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/adokter/vol2birdR/" class="external-link">vol2birdR</a></span><span class="op">)</span>
<span class="fu"><a href="../reference/install_mistnet.html">install_mistnet</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>This will download libtorch from the download section of <a href="https://pytorch.org" class="external-link uri">https://pytorch.org</a> as well
as a wrapper library from our AWS that enables the mistnet
functionality. The mistnet model has to be manually downloaded and
specified in the configuration instance. The default location of the
mistnet model is /opt/vol2bird/etc/mistnet_nexrad.pt. You can download
the mistnet model from <a href="http://mistnet.s3.amazonaws.com/mistnet_nexrad.pt" class="external-link uri">http://mistnet.s3.amazonaws.com/mistnet_nexrad.pt</a>.
<code>wget http://mistnet.s3.amazonaws.com/mistnet_nexrad.pt -O "/home/docuser/etc/mistnet_nexrad.pt"</code></p>
</div>
<div class="section level3">
<h3 id="processing">Processing<a class="anchor" aria-label="anchor" href="#processing"></a>
</h3>
<p>Processing of the radar data will always be performed in a similar
way. First you create the configuration instance and modify
configuration according to needs. Then the actual processor is initiated
and then the processing is performed.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/adokter/vol2birdR/" class="external-link">vol2birdR</a></span><span class="op">)</span>
<span class="va">config</span><span class="op">&lt;-</span><span class="va">Vol2BirdConfig</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">config</span><span class="op">$</span><span class="va">verbose</span><span class="op">&lt;-</span><span class="cn">TRUE</span>
<span class="va">config</span><span class="op">$</span><span class="va">useMistNet</span><span class="op">&lt;-</span><span class="cn">TRUE</span>
<span class="va">processor</span><span class="op">&lt;-</span><span class="va">Vol2Bird</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">processor</span><span class="op">$</span><span class="fu">process</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"/...../volume.h5"</span><span class="op">)</span>,<span class="va">config</span>,<span class="st">"vp.h5"</span>,<span class="st">"pvol.h5"</span><span class="op">)</span></code></pre></div>
<p>Let’s break down the above example.</p>
<p>First the vol2birdR library is loaded by using
<code><a href="https://github.com/adokter/vol2birdR/" class="external-link">library(vol2birdR)</a></code></p>
<p>The next step is where we setup the configuration required. This can
be modified heavily and the best way to learn about this is to read the
documentation about the config-class. In this example, the configuration
is set to printout verbose output and that the torch library (mistnet)
should be used using the mistnet model downloaded earlier.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">config</span><span class="op">&lt;-</span><span class="va">Vol2BirdConfig</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">config</span><span class="op">$</span><span class="va">verbose</span><span class="op">&lt;-</span><span class="cn">TRUE</span>
<span class="va">config</span><span class="op">$</span><span class="va">useMistNet</span><span class="op">&lt;-</span><span class="cn">TRUE</span>
<span class="va">config</span><span class="op">$</span><span class="va">mistNetPath</span><span class="op">&lt;-</span><span class="st">"/home/docuser/etc/mistnet_nexrad.pt"</span></code></pre></div>
<p>In the final step the processing is performed where the input is a
ODIM H5 volume, above defined configuration and output is a vertical
profile and a polar volume.</p>
</div>
<div class="section level3">
<h3 id="vol2birdconfig">Vol2BirdConfig<a class="anchor" aria-label="anchor" href="#vol2birdconfig"></a>
</h3>
<p>As mentioned earlier, all processing involves a config instance where
all options are set. These options involves everything from printing
certain information to what type of processing that should be performed.
In some cases it might be necessary to copy configuration instances for
whatever reason. In these cases you can’t just assign the instances
like</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">config</span><span class="op">&lt;-</span><span class="va">Vol2BirdConfig</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">extraconfig</span><span class="op">&lt;-</span><span class="va">config</span></code></pre></div>
<p>When doing like this, the config and extraconfig instances will both
refer to the same object. To avoid this, use either clone or the copy
constructor like</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">config</span><span class="op">&lt;-</span><span class="va">Vol2BirdConfig</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span>
<span class="va">extraconfig</span><span class="op">&lt;-</span><span class="va">config</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span><span class="op">)</span>             <span class="co"># Clone method</span>
<span class="va">otherconfig</span><span class="op">&lt;-</span><span class="va">Vol2BirdConfig</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">config</span><span class="op">)</span> <span class="co"># Copy constructor</span></code></pre></div>
<p>Copyright 2010-2021 Adriaan M. Dokter (Cornell lab of Ornithology,
University of Amsterdam) &amp; Netherlands eScience Centre</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.linkedin.com/in/anders-henja-03a1b05" class="external-link">Anders Henja</a>, <a href="http://adriaandokter.com" class="external-link">Adriaan M. Dokter</a>, GloBAM.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
